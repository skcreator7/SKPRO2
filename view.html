@app.route('/api/post')
async def api_post():
    """Get specific post details"""
    try:
        channel_id = int(request.args.get('channel', 0))
        message_id = int(request.args.get('message', 0))
        
        logger.info(f"üìÑ Post request: channel={channel_id}, message={message_id}")
        
        if not channel_id or not message_id:
            return jsonify({'status': 'error', 'message': 'Invalid parameters'}), 400
        
        if not bot_started or not User:
            return jsonify({'status': 'error', 'message': 'Service starting...'}), 503
        
        # Fetch message from Telegram
        try:
            msg = await User.get_messages(channel_id, message_id)
            
            if not msg or not msg.text:
                logger.warning(f"  ‚ùå Post not found or no text")
                return jsonify({'status': 'error', 'message': 'Post not found'}), 404
            
            title = extract_title_smart(msg.text)
            if not title:
                title = "Movie Post"
            
            logger.info(f"  ‚úÖ Found post: {title}")
            
            post_data = {
                'title': title,
                'content': format_post(msg.text),  # This formats the post content with HTML
                'channel': channel_name(channel_id),
                'channel_id': channel_id,
                'message_id': message_id,
                'date': msg.date.isoformat() if msg.date else None,
                'is_new': is_new(msg.date) if msg.date else False,
                'has_post': True
            }
            
            return jsonify({
                'status': 'success',
                'post': post_data,
                'bot_username': Config.BOT_USERNAME
            })
            
        except Exception as e:
            logger.error(f"  ‚ùå Post fetch error: {e}")
            return jsonify({'status': 'error', 'message': 'Failed to fetch post'}), 500
        
    except Exception as e:
        logger.error(f"‚ùå API /post error: {e}")
        return jsonify({'status': 'error', 'message': str(e)}), 500
